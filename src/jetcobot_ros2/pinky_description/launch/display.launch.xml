<?xml version='1.0'?>

<launch>
    <!-- Namespace argument for multi-robot support -->
    <arg name="namespace" default="" description="Namespace for the robot (e.g., pinky1, pinky2)"/>
    <arg name="default_rviz_config_path" default="$(find-pkg-share pinky_description)/rviz/urdf_config.rviz"/>
    
    <!-- Robot state publisher with conditional namespace -->
    <node pkg="robot_state_publisher" exec="robot_state_publisher" name='robot_state_publisher' output='screen' namespace="$(var namespace)">
        <param name="robot_description" value="$(command 'xacro $(find-pkg-share pinky_description)/urdf/robot_core.xacro namespace:=$(var namespace)')" />
    </node>

    <!-- Joint state publisher GUI with conditional namespace -->
    <node pkg="joint_state_publisher_gui" exec="joint_state_publisher_gui" name="joint_state_publisher" output="screen" namespace="$(var namespace)"/>
    
    <!-- RViz2 (global, no namespace) -->
    <node pkg="rviz2" exec="rviz2" output="screen" args="-d $(var default_rviz_config_path)" />
</launch>    